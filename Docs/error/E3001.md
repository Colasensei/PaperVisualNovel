# E3001 - 解析错误

## 代码信息

- **代码**: `E3001`
- **类型**: 错误
- **等级**: ERROR
- **描述**: 脚本命令格式不正确，无法解析

## 含义

此错误表示 PGN 脚本中存在语法错误，引擎无法正确解析命令。这通常是由于引号不匹配、参数缺失或格式错误导致的。

## 触发条件

- `say` 命令中的字符串缺少结束引号
- `input` 命令中的提示文本缺少结束引号
- `plugin` 命令中的参数字符串缺少结束引号
- 命令格式不符合规范

## 示例输出

```
[2024-01-01 12:00:00] ERROR [E3001] Missing closing quote in say command at line 989
[2024-01-01 12:00:00] ERROR [E3001] Invalid input command: missing closing quote at line 42
[2024-01-01 12:00:00] ERROR [E3001] Invalid plugin command format: missing closing quote at line 156
```

## 控制台输出

```
ERROR [E3001] ParseError: Unterminated string literal at 'say' command
       > Line 990: say "\"看起来是。他记录里写得很清楚：\'他们杀了小雨，用看不见的刀。\'\" 0.5 white
         ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^~
       Hint: Add closing double quote (") at the end of the string. Use \" to include double quotes inside the string.
       See: https://github.com/Colasensei/PaperVisualNovel/tree/master/Docs/errors/E3001.md
```

## 常见错误示例

### ❌ 错误：缺少结束引号

```
say "你好，世界 0.5 white
```

### ✅ 正确：完整引号

```
say "你好，世界" 0.5 white
```

### ❌ 错误：转义字符使用不当

```
say "他说："你好"" 0.5 white
```

### ✅ 正确：使用反斜杠转义

```
say "他说：\"你好\"" 0.5 white
```

## 解决方案

1. 确保所有字符串都有匹配的结束引号
2. 字符串内需要显示引号时使用 `\"` 转义
3. 检查命令参数是否完整
4. 使用引号将包含空格的参数括起来

## 相关代码

- [E3002](E3002.md) - 未知命令
- [E3005](E3005.md) - 条件表达式无效
